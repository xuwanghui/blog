<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="https://fonts.font.im/css?family=HarmonyOS_Regular:300,300italic,400,400italic,700,700italic|JetBrains Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/blog/lib/pace/pace-theme-minimal.min.css">
  <script src="/blog/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"laoxu.live","root":"/blog/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="浅谈小程序 在 2016 年的「微信公开课 Pro」演讲中，微信事业群总裁张小龙这样描述了小程序的前景与未来：  &quot; 小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无须安装卸载 &quot;。  小程序刚发布的时候要求压缩包的">
<meta property="og:type" content="article">
<meta property="og:title" content="小程序 学习">
<meta property="og:url" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/index.html">
<meta property="og:site_name" content="老许的欢乐世界">
<meta property="og:description" content="浅谈小程序 在 2016 年的「微信公开课 Pro」演讲中，微信事业群总裁张小龙这样描述了小程序的前景与未来：  &quot; 小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无须安装卸载 &quot;。  小程序刚发布的时候要求压缩包的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830095900369.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830100037455.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830100558161.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830100717245.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315155723570.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315155920319.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315160053556.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315160301174.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315160351445.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315160905848.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315160948554.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315161024710.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315161115307.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240315161205800.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830111436547.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830111509859.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830141949409.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830143421384.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830144258857.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220905233655925.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220905234949557.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240319160631191.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240319161138667.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240319161157952.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240319161219064.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240319161234777.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20240321114537787.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220908220753798.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220908225310387.png">
<meta property="og:image" content="https://res.wx.qq.com/wxdoc/dist/assets/img/page-lifecycle.2e646c86.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220912205119776.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220912205219937.png">
<meta property="og:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220912205522992.png">
<meta property="article:published_time" content="2023-08-08T16:56:58.172Z">
<meta property="article:modified_time" content="2024-03-28T10:43:01.289Z">
<meta property="article:author" content="老许">
<meta property="article:tag" content="小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/image-20220830095900369.png">

<link rel="canonical" href="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<link rel="preconnect" href="https://s1.hdslb.com/" />
<link rel="stylesheet" href="//s1.hdslb.com/bfs/static/jinkela/long/font/regular.css" media="all" onload="this.media='all'" />
<link rel="stylesheet" href="//s1.hdslb.com/bfs/static/jinkela/long/font/medium.css" media="all" onload="this.media='all'" />

  <title>小程序 学习 | 老许的欢乐世界</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/blog/atom.xml" title="老许的欢乐世界" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://github.com/xuwanghui" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">老许的欢乐世界</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">愿与上善 唯望君安</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-resources">

    <a href="/blog/resources/" rel="section"><i class="fa fa-download fa-fw"></i>资源</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">14</span></a>

  </li>
        <li class="menu-item menu-item-comments">

    <a href="/blog/comments/" rel="section"><i class="fa fa-comments fa-fw"></i>留言板</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    <!--看板娘-->
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
    <script src="/blog/live2d-widget/autoload.js"></script>
    <!--<script src="https://cdn.jsdelivr.net/gh/xuwanghui/live2d-widget/autoload.js"></script>-->

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="老许">
      <meta itemprop="description" content="当学习成为了习惯<br/>知识也就变成了常识">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="老许的欢乐世界">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          小程序 学习
        </h1>

        <div class="post-meta">
        
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-08-09 00:56:58" itemprop="dateCreated datePublished" datetime="2023-08-09T00:56:58+08:00">2023-08-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-28 18:43:01" itemprop="dateModified" datetime="2024-03-28T18:43:01+08:00">2024-03-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="url" rel="index"><span itemprop="name">小程序</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/blog/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/blog/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>40k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>37 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h4 id="浅谈小程序">浅谈小程序</h4>
<p>在 2016 年的「微信公开课 Pro」演讲中，微信事业群总裁张小龙这样描述了小程序的前景与未来：</p>
<blockquote>
<p>&quot; 小程序是一种不需要下载安装即可使用的应用，它实现了应用 “触手可及” 的梦想，用户扫一扫或者搜一下即可打开应用。也体现了 “用完即走” 的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无须安装卸载 &quot;。</p>
</blockquote>
<p>小程序刚发布的时候要求压缩包的体积不能大于 1M，否则无法通过，在 2017 年 4 月做 了改进，由原来的 1M 提升到 2M；</p>
<p>2017 年 1 月 9 日 0 点，万众瞩目的微信第一批小程序正式低调上线。</p>
<span id="more"></span>
<p>而在 2020年的「WWDC 苹果全球开发者大会」中，轻应用则被作为 iOS 14 的主要功能进行强调与推介：</p>
<p><img data-src="image-20220830095900369.png" alt=""></p>
<blockquote>
<p>App Clip 就是一种无需用户在 iPhone 或 iPad 上安装完整的应用程序，就可以访问使用该应用程序的部分功能的轻量级应用，它们专注于处理简单快速的任务。</p>
</blockquote>
<p>不论是张小龙对「微信小程序」略带文艺的描述，还是在 WWDC 上对于「轻应用」在 iOS 生态中的地位描述，我们都能大抵能理解小程序诞生的初衷。而如果我们把时间从这两场发布会的转至今日，却会发现小程序早已不再局限于「用完即走」与「快速打开」，各式各样的小程序已呈现百花齐放的状态，不论是工具小程序，内容小程序，交易小程序，直播小程序，各种类型应有尽有。</p>
<p>不妨让我尝试用自己的工作日常举例，早上出门上班，我会打开「腾讯乘车码」扫描地铁场所码，并把健康码给地铁安检查看，临近中午11点 30分，我会用「美团」或「饿了么」为自己订一份工作餐，吃完午饭后我会打开「动物餐厅」看看小猫咪又赚了多少小鱼干，下午会议时使用「腾讯文档」查看会议纪要，快下班的时候用「叮咚买菜」购置晚饭所需的食材，晚上回家做饭时，用「懒饭 App」看看想吃的番茄肥牛饭怎么做。</p>
<p><img data-src="image-20220830100037455.png" alt=""></p>
<p>时至今日，当我们说到小程序时，也不仅仅在特指微信小程序，各式各样的平台都纷纷推出了自己专属的小程序平台，不论支付宝、字节跳动、美团还是百度等其他互联网大厂，都纷纷推出了自己专属的小程序平台，且都基于自己的生态业务，为小程序提供流量进行支持，希望用户与开发者能够选择自有平台中的小程序进行开发。</p>
<p><strong>什么样的应用适合使用小程序开发</strong></p>
<p>虽然小程序市场时至今日依然是一片蓝海，但我想也不是所有应用「都可以，都应该」使用小程序开发的。</p>
<p>基于我们的经验与积累来说，符合「逻辑简单，使用低频，对性能要求不极致」的应用场景，更加适合使用小程序进行研发。</p>
<p><strong>逻辑简单</strong>：是指应用的操作逻辑并不十分复杂，各类生活服务（如打车，订餐，查地图与导航等等）都需要给用户提供简单清晰的操作逻辑，而这一类也天然的符合起初小程序「用完即走」的定义，因此十分符合使用小程序研发。一些逻辑复杂的应用场景想要通过小程序进行适配，就可能会面临更多的设计与研发困难，同时在性能和体验也可能会面对更多需要解决的问题。</p>
<p><strong>使用低频</strong>：是指小程序的使用频率不应该太高，比如社交类的钉钉或飞书，金融类的掌上生活或浦大喜奔，媒体类的网易云音乐或斗鱼都不太适合使用小程序进行重新设计。对于用户使用的频率较高的应用来说，直接打开应用进行体验的步骤肯定最快的，此外由于某些行业的特殊性质（比如具备交易，支付等能力）要求，对于安全性与保密性的首选风险判断原则，也不宜使用常见的小程序进行设计。</p>
<p><strong>对性能要求不极致</strong>：是指由于小程序始终存在于某个独立应用（也被称为宿主应用）中，考虑到目前的性能与研发所限制，暂时不太适合开发对于这两者有更高要求的移动应用。比如把原神，王者荣耀这样的游戏应用通过小程序进行重新设计，在目前来说肯定是不现实的。</p>
<p>当然，随着相关研发实力的增强与产业生态的逐渐补充，也有越来越多的「不可能」变为了「可能」，比如华西证券的「华彩人生」，浦发银行的「浦大喜奔」，某省的移动警务平台等客户都选择使用小程序容器方案进行落地实现</p>
<p><strong>小程序与H5，原生应用有何区别？</strong></p>
<p>很多朋友在了解小程序技术的时候，都会有这样的疑惑“到底与 H5，原生应用”这些技术相比，小程序具有哪些优势与劣势呢？</p>
<p><strong>H5 移动应用</strong></p>
<p>我们常说的 H5 其实也通常可以被视为一种 Web App，相比于我们在桌面端浏览器中打开的网页，主要是增加了一些响应式的设计与交互优化，从而使得这些网页更适合在移动端的浏览器中显示运行。既然是网页应用，那依然是基于 JavaScript，CSS 和 HTML 进行实现的，由于是基于各类前端技术栈进行实现，最大的好处就是快速、简单、方便，且有各种技术资料可以参考。</p>
<p>同样，H5 的缺点与优点也是并存的，比如由于技术已经很成熟了，对于前端经验欠缺的新人来说，面对各式各样的框架，模块、任务管理工具，UI 库可能会出现无从下手的问题；此外相比于原生应用，对于系统权限的获取（比如数据缓存能力，网络通信状态等）都显得比较鸡肋，当低性能的设备加载包含复杂逻辑的页面时，会出现明显的卡顿与延迟问题。</p>
<p><strong>原生应用</strong></p>
<p>原生应用也被叫做 Native App，相比于 H5 应用通过前端三大件进行实现不同，原生应用主要会采用 iOS 与 Android 的专有语言 Object-C（或 Swift），Java（或 Kotlin）进行实现，大多我们所常见的国民应用，比如微信，支付宝等都属于这种原生应用。</p>
<p>既然被叫做「原生应用」，就像操作系统的亲儿子一样，天然在性能与体验上具备优秀的潜质，也有组件库丰富，接口支持完善等各种优势特点。但原生应用最大的缺陷就是不能跨平台研发，以目前的主流市场为例，必须要支持 iOS 与 Android 两个主流平台。</p>
<p><strong>混合应用</strong></p>
<p>混合应用一般被称为 Hybrid App。简单来说，混合应用<strong>就是将原生功能封装成对应的 JS 接口，在前端使用 H5 来开发对应的 App （即 H5 作为内容+原生应用作为壳）</strong> ，看上去虽然是一个移动原生应用整体，但实际的页面还是网页，一套代码可以生成 iOS 与 Android 两种安装包，开发成本较低。</p>
<p>我们常见的淘宝，京东等应用由于更新与优化节奏都十分快速，为了更好的响应「贴近用户」的目标，应用中有的功能通过原生 Native 实现，有的功能则通过 H5 页面进行实现，这种应用就属于我们所说的混合应用。</p>
<p><strong>小程序</strong></p>
<p>严格意义上来说，小程序并不属于以上 3 种应用的任何一种。小程序主要通过 JavaScript 与 CSS 这种常见的前端技术进行开发，但又没有完全使用 HTML 进行实现，在不同的操作系统中，JavaScript 代码分别运行在 iOS 的 JavaScriptCore 与 Android 的 JSCore 中，各家小程序平台或多或少都有一部分自研的核心，因此渲染视图层的组件也有所不同。</p>
<p><img data-src="image-20220830100558161.png" alt=""></p>
<p>相比「 H5 移动应用」与「 移动原生应用」，小程序具备如下优势：</p>
<ul>
<li>具备跨平台的能力，一套代码可以在 iOS 与 Android 两个平台中运行；</li>
<li>远超过 H5 的体验（支持本地缓存，Webview，有丰富的组件与支持库）；</li>
<li>不需要下载和安装，不想用了也不需要卸载；</li>
<li>可以避免 DOM 泄露（不使用常用的 window 对象与 document 对象）；</li>
<li>与 App 相比，学习门槛和开发成本都比较低，可以快速上手；</li>
<li>相比 H5，小程序受限微信运营规范，不像H5页面那么灵活。但它也可以做一些 H5 做 不了的事情，比如消息订阅，直接转发消息给好友等；</li>
</ul>
<p><strong>常见的小程序开发框架有哪些</strong></p>
<p>以主要的小程序开发框架举例，腾讯云社区的「极乐君」将不同平台下小程序支持的力度整理在一张表中：</p>
<p><img data-src="image-20220830100717245.png" alt=""></p>
<h4 id="小程序启动机制">小程序启动机制</h4>
<p>小程序启动会有<strong>两种情况</strong>：</p>
<ul>
<li>冷启动</li>
<li>热启动</li>
</ul>
<p><img data-src="image-20240315155723570.png" alt="小程序启动机制"></p>
<p>与小程序冷、热启动相关的，是小程序的<strong>两种状态</strong>：</p>
<ul>
<li>
<p>前台状态</p>
</li>
<li>
<p>后台状态</p>
</li>
</ul>
<p>为了安全和管控，小程序使用<strong>双线程</strong>执行：视图线程和逻辑线程</p>
<ul>
<li>
<p>View 视图线程</p>
</li>
<li>
<p>App Service 逻辑线程</p>
</li>
</ul>
<p><img data-src="image-20240315155920319.png" alt="小程序双线程"></p>
<p><strong>扩展问题：视图持续更新是怎么实现的？</strong></p>
<p><img data-src="image-20240315160053556.png" alt="代码: Hybird执行js示例"></p>
<p><strong>扩展问题：使用 setData 可能遇到哪些问题？</strong></p>
<p><strong>扩展问题：微信为什么要造一个 WXS？</strong></p>
<p><img data-src="image-20240315160301174.png" alt="wxs示例"></p>
<h5 id="视图线程">视图线程</h5>
<p><img data-src="image-20240315160351445.png" alt="小程序视图线程编译"></p>
<p><img data-src="image-20240315160905848.png" alt="小程序一般-原生双层视图层"></p>
<h5 id="逻辑线程">逻辑线程</h5>
<p><img data-src="image-20240315160948554.png" alt="小程序页面主要生命周期函数"></p>
<p><img data-src="image-20240315161024710.png" alt="逻辑线程生命状态图"></p>
<p><img data-src="image-20240315161115307.png" alt="视图线程的四个状态"></p>
<p><img data-src="image-20240315161205800.png" alt="逻辑线程的四个状态"></p>
<h4 id="小程序开发环境">小程序开发环境</h4>
<p>1、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">微信文档</a></p>
<p>2、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">微信开发工具下载</a></p>
<p>3、<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/">注册小程序账号</a></p>
<p><img data-src="image-20220830111436547.png" alt=""></p>
<p><img data-src="image-20220830111509859.png" alt=""></p>
<h4 id="小程序特点">小程序特点</h4>
<ol>
<li>
<p>没有 DOM</p>
</li>
<li>
<p>组件化开发：具备特定功能效果的代码集合</p>
</li>
<li>
<p>体积小，单个压缩包体积不能大于 2M，否则无法上线</p>
</li>
<li>
<p>小程序的四个重要的文件</p>
<ul>
<li>
<p>.js → js逻辑 → js</p>
</li>
<li>
<p>.wxml → view 结构 → html</p>
</li>
<li>
<p>.wxss →  view 样式 → css</p>
</li>
<li>
<p>.json →  view 配置 → json 文件</p>
</li>
</ul>
</li>
<li>
<p>小程序适配方案: rpx (responsive pixel 响应式像素单位)</p>
<ul>
<li>
<p>小程序适配单位： rpx</p>
</li>
<li>
<p>规定任何屏幕下宽度为 750rpx</p>
</li>
<li>
<p>小程序会根据屏幕的宽度不同自动计算rpx 值的大小</p>
</li>
<li>
<p>Iphone6 下： 1rpx = 1 物理像素 = 0.5px</p>
</li>
</ul>
</li>
</ol>
<p><img data-src="image-20220830141949409.png" alt=""></p>
<h4 id="小程序配置">小程序配置</h4>
<h5 id="全局配置">全局配置</h5>
<p>作用： 用于为整个应用进行选项设置</p>
<p><img data-src="image-20220830143421384.png" alt=""></p>
<h5 id="页面配置">页面配置</h5>
<p>配图参上作用：用于为指定的页面进行配置</p>
<p>注：页面配置的优先级高于全局配置</p>
<h5 id="sitemap-配置">sitemap 配置</h5>
<p>配图参上作用：配置其小程序页面是否允许微信索引</p>
<h4 id="小程序基础">小程序基础</h4>
<h5 id="框架接口">框架接口</h5>
<p><img data-src="image-20220830144258857.png" alt=""></p>
<p><strong>App</strong></p>
<ol>
<li>
<p>全局 app.js 中执行 App()</p>
</li>
<li>
<p>生成当前应用的实例对象</p>
</li>
<li>
<p>getApp()获取全局应用实例</p>
</li>
</ol>
<p><strong>Page</strong></p>
<ol>
<li>页面.js 中执行Page()</li>
<li>生成当前页面的实例</li>
<li>通过getCurrentPages() 获取页面实例</li>
</ol>
<h5 id="事件系统">事件系统</h5>
<p>忘了写 ~</p>
<h5 id="WXML语法">WXML语法</h5>
<p>具体看官方文档 ~</p>
<h6 id="ToDoList">ToDoList</h6>
<p>todolist.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;header-input&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">bindinput</span>=<span class="string">&quot;inputHandler&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&#x27;&#123;&#123;text.title?text.title:&quot;&quot;&#125;&#125;&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">bindtap</span>=<span class="string">&quot;add&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;show&quot;</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;todoList.length &gt; 0&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;todoList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>&#123;&#123;item.id + 1&#125;&#125;. &#123;&#123;item.title&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;warn&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">bindtap</span>=<span class="string">&quot;del&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>暂无待办事项<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>todolist.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">todoList</span>: [</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&#x27;吃饭&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;睡觉&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;打豆豆&#x27;</span>&#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 保存用户输入的数据</span></span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 用户输入数据后会触发的回调</span></span><br><span class="line">    <span class="title function_">inputHandler</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="comment">// 保存用户输入的数据</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">text</span>: &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>.<span class="property">length</span>,</span><br><span class="line">                <span class="attr">title</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 添加</span></span><br><span class="line">    <span class="title function_">add</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// 修改数据并且清空输入框</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">todoList</span>: [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>, <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">text</span>],</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 删除</span></span><br><span class="line">    <span class="title function_">del</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="comment">// 获取传过来的索引</span></span><br><span class="line">        <span class="comment">// console.log(e.target.dataset.index)</span></span><br><span class="line">        <span class="keyword">var</span> index = e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span></span><br><span class="line">        <span class="comment">// 删除数据</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">        <span class="comment">// 只要修改了数据 一定要重新setData</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">todoList</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">todoList</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h6 id="Tab">Tab</h6>
<p>tab.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;tab &#123;&#123;index == current ? &#x27;active&#x27; : &#x27;&#x27;&#125;&#125;&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">bindtap</span>=<span class="string">&quot;changeCurrent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;tabList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>tab.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">tabList</span>: [<span class="string">&quot;首页&quot;</span>, <span class="string">&quot;购物车&quot;</span>, <span class="string">&quot;我的&quot;</span>],</span><br><span class="line">        <span class="attr">current</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">changeCurrent</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="comment">// 在事件处理函数中，通过 event.target.dataset.参数名 即可获取到具体参数的值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>)</span><br><span class="line">       <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">           <span class="attr">current</span>: e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span></span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>target 和 currentTarget的区别？</p>
<p>target 是触发该事件的源头组件，而 currentTarget 则是当前事件所绑定的组件</p>
<p><img data-src="image-20220905233655925.png" alt=""></p>
<p>点击内部的按钮时，点击事件以冒泡的方式向外扩散，也会触发外层 view 的 tap 事件处理函数。</p>
<p>此时，对于外层的 view 来说：</p>
<p>e.target 指向的是触发事件的源头组件，因此，e.target 是内部的按钮组件</p>
<p>e.currentTarget 指向的是当前正在触发事件的那个组件，因此，e.currentTarget 是当前的 view 组件</p>
<h5 id="WXSS语法">WXSS语法</h5>
<p><img data-src="image-20220905234949557.png" alt=""></p>
<h5 id="WXS语法">WXS语法</h5>
<p>具体看官方文档 ~</p>
<p>这里补充一点，为什么有了js还要设计wxs？</p>
<p><strong>1、 WXS 的基础类库：</strong></p>
<p>WXS只提供给开发者5个基础类库，分别是 console，Math，JSON，Number，Date，以及一些常用的全局变量和全局函数，数量不多，但已经能满足基本的数据操作要求，而对于复杂的数据操作，比如类定义和继承等，还是需要依靠逻辑层的 JS 脚本完成。</p>
<p><strong>2、数组遍历</strong></p>
<p>WXS 里，遍历数组只能通过for实现，而JS中的for in和for of不被支持，对于需要循环处理数据的场景，也可以通过数组的forEach方法实现遍历：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">ary.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>3、 变量类型判断</strong></p>
<p>由于WXS先天不支持使用 Array 对象，因此我们平常用于判断数组类型变量的语句[] instanceof Array也就不能使用了，而typeof []的输出结果是&quot;object&quot;，并不能满足实际的开发要求。所幸我们还可以使用变量的 「constructor」属性进行类型判断：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[].<span class="property">constructor</span> === <span class="title class_">Array</span>  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p><strong>4、性能差异</strong></p>
<p>小程序的架构分成了逻辑层和视图层，WXS 与JavaScript还有一个差异在于，它与WXML一同们于视图层，运行于同一个线程内，因此减少了跨线程通信的开销。这也是我们之所以优先采用WXS处理数据的原因之一</p>
<p><strong>5、平台差异</strong></p>
<p>小程序在Android上，使用V8引擎解析和渲染 JavaScript; 而在iOS上，则是使用 JavaScriptCore，这两者在解析性能的表现上差异比较大，相对来说 V8 的性能比 JSC 要好得多，那么在 IOS 的小程序中，使用脱离 JavaScript 环境的 WXS，就会使性能有更多的提升，这也是WXS文档中提及 “在 iOS 设备上小程序内的 wxs 会比 javascript 代码快 2 ~ 20 倍” 的具体原因</p>
<h6 id="FormatTime">FormatTime</h6>
<p>dateFormat.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入wxs文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">&#x27;./dateFormat.wxs&#x27;</span> <span class="attr">module</span>=<span class="string">&quot;aaa&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;aaa(time)&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>dateFormat.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">time</span>: <span class="number">1646372333761</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>dateFormat.wxs</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dateFormat</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> newTime = <span class="title function_">getDate</span>(time)</span><br><span class="line">    <span class="keyword">var</span> year = newTime.<span class="title function_">getFullYear</span>()</span><br><span class="line">    <span class="keyword">var</span> month = newTime.<span class="title function_">getMonth</span>() + <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> date = newTime.<span class="title function_">getDate</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> year + <span class="string">&#x27;-&#x27;</span> + month + <span class="string">&#x27;-&#x27;</span> + date </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将函数暴露</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = dateFormat</span><br></pre></td></tr></table></figure>
<h6 id="Search">Search</h6>
<p>search.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">&#x27;./search.wxs&#x27;</span> <span class="attr">module</span>=<span class="string">&quot;searchList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;search-input&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindinput</span>=<span class="string">&quot;getKeyWords&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;searchList(list, keyWords)&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>search.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">list</span>: [<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;acd&#x27;</span>, <span class="string">&#x27;cdb&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>, <span class="string">&#x27;zxe&#x27;</span>, <span class="string">&#x27;qwe&#x27;</span>, <span class="string">&#x27;amd&#x27;</span>, <span class="string">&#x27;cmd&#x27;</span>],</span><br><span class="line">        <span class="attr">keyWords</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getKeyWords</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">keyWords</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>search.wxs</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">search</span>(<span class="params">list, keyWords</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> list.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> item.<span class="title function_">indexOf</span>(keyWords) &gt; -<span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = search</span><br></pre></td></tr></table></figure>
<h5 id="数据请求">数据请求</h5>
<p>request.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.imgUrl&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>request.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        swiperList : []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;https://www.fastmock.site/mock/d4c75f77a8eef86dc58b3fced5bf604e/laoxu/api/getData&#x27;</span>,</span><br><span class="line">          <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;<span class="attr">data</span>:&#123;data&#125;&#125; = result</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">swiperList</span>: data.<span class="property">swiperList</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>request.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实战场景</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">login</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// 请求自己后台登录接口</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">requestLoginApi</span> = (<span class="params">code</span>) =&gt; &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/user/wexin-login2&#x27;</span>,</span><br><span class="line">      ...</span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> token = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">authorizationToken</span></span><br><span class="line">  	  wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;token&#x27;</span>, token)</span><br><span class="line">      <span class="title function_">onUserLogin</span>(token)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onUserLogin</span> = (<span class="params">token</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">getApp</span>().<span class="property">globalData</span>.<span class="property">token</span> = token</span><br><span class="line">  ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 检查当前微信登录状态是否有效</span></span><br><span class="line">wx.<span class="title function_">checkSession</span>(&#123;</span><br><span class="line">  <span class="title function_">success</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> token = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (token) <span class="title function_">onUserLogin</span>(token)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">fail</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 拉取微信用于登录鉴权的code</span></span><br><span class="line">    wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (res0.<span class="property">code</span>) &#123;</span><br><span class="line">          <span class="title function_">requestLoginApi</span>(res0.<span class="property">code</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 从之前使用的wx.request接口使用方式可以看出来 所有小程序接口都有两个特征</span></span><br><span class="line"><span class="comment">// 1、参数是一个对象 可以让参数的定义与添加更加自由</span></span><br><span class="line"><span class="comment">// 2、拥有相同的调用结果处理方式 都有success、fail、complete三个回调属性</span></span><br></pre></td></tr></table></figure>
<h5 id="小程序组件">小程序组件</h5>
<h6 id="icon"><a href="developers.weixin.qq.com/miniprogram/dev/component/icon.html">icon</a></h6>
<p><strong>扩展问题：icon组件介绍及如何自定义实现图标?</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;icon type=<span class="string">&quot;success&quot;</span> size=<span class="string">&quot;30px&quot;</span> color=<span class="string">&quot;green&quot;</span> /&gt;</span><br><span class="line">type类型范围:[<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;success_no_circle&#x27;</span>, <span class="string">&#x27;info&#x27;</span>, <span class="string">&#x27;warn&#x27;</span>,<span class="string">&#x27;waiting&#x27;</span>,<span class="string">&#x27;cancel&#x27;</span>,<span class="string">&#x27;download&#x27;</span>, <span class="string">&#x27;search&#x27;</span>, <span class="string">&#x27;clear&#x27;</span>]</span><br><span class="line"></span><br><span class="line">&lt;icon type=<span class="string">&quot;success&quot;</span> size=<span class="string">&quot;100rpx&quot;</span>/&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">icon</span> <span class="attr">style</span>=<span class="string">&quot;background:grey;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">size</span>=<span class="string">&quot;100rpx&quot;</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><img data-src="image-20240319160631191.png" alt="image-20240319160631191"></p>
<p><strong>扩展问题：图标能否与文本同行，放在段落中?</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可以 但是不能在text标签内使用字体图标</span><br></pre></td></tr></table></figure>
<p><strong>扩展问题：实现icon图标的方案有哪些，原理是什么?</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sprite_icon</span> &#123; </span><br><span class="line"> <span class="attribute">display</span>: block;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line"> <span class="attribute">height</span>: <span class="number">80px</span>; </span><br><span class="line"> <span class="comment">/* 此处在wxss中，可以使⽤⽹络图⽚，不能使⽤本地图⽚ */</span></span><br><span class="line"> <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://cdn.nlark.com/..1bd0.png&quot;</span>) -<span class="number">180px</span> -<span class="number">310px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="image-20240319161138667.png" alt="image-20240319161138667"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 使⽤css3绘制图标 */</span></span><br><span class="line"><span class="selector-class">.icon-close</span> &#123;</span><br><span class="line"> <span class="attribute">display</span>: inline-block;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">17px</span>;</span><br><span class="line"> <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line"> <span class="attribute">background</span>: red;</span><br><span class="line"> <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-close</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line"> <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"> <span class="attribute">display</span>: block;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">17px</span>;</span><br><span class="line"> <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line"> <span class="attribute">background</span>: red;</span><br><span class="line"> <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">90deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="image-20240319161157952.png" alt="image-20240319161157952"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line"> <span class="attribute">font-family</span>: <span class="string">&#x27;iconfont&#x27;</span>;</span><br><span class="line"> <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;//at.alicdn.com/t/font_1716930_3m30jvz589y.eot&#x27;</span>);</span><br><span class="line"> <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;//at.alicdn.com/t/font_1716930_3m30jvz589y.eot?#iefix&#x27;</span>)</span><br><span class="line"> <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line"> <span class="built_in">url</span>(<span class="string">&#x27;//at.alicdn.com/t/font_1716930_3m30jvz589y.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line"> <span class="built_in">url</span>(<span class="string">&#x27;//at.alicdn.com/t/font_1716930_3m30jvz589y.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line"> <span class="built_in">url</span>(<span class="string">&#x27;//at.alicdn.com/t/font_1716930_3m30jvz589y.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>),</span><br><span class="line"> <span class="built_in">url</span>(<span class="string">&#x27;//at.alicdn.com/t/font_1716930_3m30jvz589y.svg#iconfont&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line"> <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"> <span class="attribute">font-style</span>: normal;</span><br><span class="line"> -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line"> -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-sun</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line"> <span class="attribute">content</span>: <span class="string">&quot;\e603&quot;</span>;</span><br><span class="line"> <span class="attribute">color</span>: red;</span><br><span class="line"> <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="attribute">icon</span> class=&quot;iconfont <span class="attribute">icon</span>-sun&quot;&gt;&lt;/<span class="attribute">icon</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="image-20240319161219064.png" alt="image-20240319161219064"></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">www<span class="selector-class">.sojson</span><span class="selector-class">.com</span>/image2base64<span class="selector-class">.html</span></span><br><span class="line"><span class="selector-class">.svg-icon</span>&#123;</span><br><span class="line"> <span class="attribute">display</span>: block;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line"> <span class="attribute">height</span>: <span class="number">200px</span>; </span><br><span class="line"> <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line"> <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;data:image/svg+xml;base64,PHN...Zz4=&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="attribute">icon</span> class=&quot;svg-<span class="attribute">icon</span>&quot;&gt;&lt;/<span class="attribute">icon</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img data-src="image-20240319161234777.png" alt="image-20240319161234777"></p>
<p><strong>拓展问题：有时候真机上显示icon空白，不正常显示的问题</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有人觉得可能是因为url导致的 因为字体文件的url没有在安全域名中定义 访问被拒绝了 其实不是 在wxss中加载图片及字体文件资源是允许使用外域地址的 如果图标是自定义实现的 要检查下机型及嵌入的字体文件类型 很有可能是兼容性引起的 在小程序中推荐使用woff和ttf格式的字体 如果使用的是这俩问题依然存在的话 可以考虑SVG格式的数据嵌入 </span><br></pre></td></tr></table></figure>
<p><strong>拓展问题：weui组件库里的icon组件的图标如何取出来，保存到本地?</strong><br>
答：<a target="_blank" rel="noopener" href="https://git.weixin.qq.com/rxyk/weapp-practice/repository/archive.zip?ref=2.1-icon-514">sketch设计稿</a></p>
<h6 id="progress">progress</h6>
<p><strong>实现简易下载效果</strong></p>
<p>wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progress-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;progress-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">progress</span> <span class="attr">class</span>=<span class="string">&quot;mt&quot;</span> <span class="attr">percent</span>=<span class="string">&#x27;&#123;&#123;percentValue&#125;&#125;&#x27;</span> <span class="attr">border-radius</span>=<span class="string">&#x27;50&#x27;</span> <span class="attr">stroke-width</span>=<span class="string">&#x27;10&#x27;</span> <span class="attr">active</span> <span class="attr">active-mode</span>=<span class="string">&quot;forwards&quot;</span> <span class="attr">bindactiveend</span>=<span class="string">&#x27;complete&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;icons&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">class</span>=<span class="string">&quot;progress-cancel&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cancel&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">icon</span> <span class="attr">class</span>=<span class="string">&quot;progress-cancel&quot;</span> <span class="attr">type</span>=<span class="string">&quot;download&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;download&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">icon</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isShow&#125;&#125;&quot;</span>&gt;</span>下载完成<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isShow2&#125;&#125;&quot;</span>&gt;</span>暂停下载<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">	<span class="attr">data</span>: &#123;</span><br><span class="line">		<span class="attr">percentValue</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="attr">isShow</span>: <span class="literal">false</span>,</span><br><span class="line">		<span class="attr">isShow2</span>: <span class="literal">false</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// 动画完成</span></span><br><span class="line">	<span class="title function_">complete</span>(<span class="params">e</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (e.<span class="property">detail</span>.<span class="property">curPercent</span> &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">				<span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// 暂停动画</span></span><br><span class="line">	<span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>)</span><br><span class="line">		<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">			<span class="attr">isShow2</span>: <span class="literal">true</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// 继续下载</span></span><br><span class="line">	<span class="title function_">download</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>)</span><br><span class="line">		<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">			<span class="attr">isShow2</span>: <span class="literal">false</span></span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">				<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">				<span class="attr">percentValue</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> += <span class="number">10</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;, <span class="number">500</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">				<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>)</span><br><span class="line">				<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">					<span class="attr">isShow2</span>: <span class="literal">false</span></span><br><span class="line">				&#125;)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">				<span class="attr">percentValue</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">percentValue</span> += <span class="number">10</span></span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;, <span class="number">500</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>拓展问题：progress 已产生的进度条如何设置圆角?</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;progress <span class="attribute">border-radius</span>=&quot;<span class="number">5</span>&quot; percent=&quot;<span class="number">20</span>&quot; show-info /&gt;</span><br><span class="line"><span class="selector-class">.wx-progress-inner-bar</span> &#123;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line"> <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wx-progress-inner-bar</span> &#123;</span><br><span class="line"> <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>扩展问题：如何实现环形进度条？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">代码太多...</span><br></pre></td></tr></table></figure>
<p><strong>扩展问题：已经加载完的进度条progress,如何点击某个按钮让它重新加载呢?</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">percentValue</span>: <span class="number">0</span> &#125;);</span><br><span class="line">	<span class="keyword">if</span> (wx.<span class="title function_">canIUse</span>(<span class="string">&#x27;nextTick&#x27;</span>)) &#123;</span><br><span class="line">		wx.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">percentValue</span>: <span class="number">100</span> &#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 小程序每秒渲染的帧数是60帧</span></span><br><span class="line">			<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">percentValue</span>: <span class="number">100</span> &#125;);</span><br><span class="line">		&#125;, <span class="number">17</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二</span></span><br><span class="line"><span class="title function_">onTapReloadBtn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">percentValue</span>: <span class="number">0</span> &#125;)</span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">percentValue</span>: <span class="number">50</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>扩展问题：progress石边进度的百分比数字,它的颜色怎么设置?</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;gap&quot;</span>&gt;</span>progress 右边进度的百分比数字，它的颜色怎么设置？<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">percent</span>=<span class="string">&quot;40&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;5&quot;</span> <span class="attr">show-info</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">.wx-progress-info &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="rich-text">rich-text</h6>
<p>rich-text.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- emsp: 中文字符空格大小 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">space</span>=<span class="string">&quot;emsp&quot;</span> <span class="attr">nodes</span>=<span class="string">&quot;&#123;&#123;nodes&#125;&#125;&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;tap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>=====================<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>通过HTML String渲染<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-content&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">nodes</span>=<span class="string">&quot;&#123;&#123;htmlSnip&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>rich-text.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// name: 表示节点名称</span></span><br><span class="line">        <span class="comment">// attrs: 节点属性</span></span><br><span class="line">        <span class="comment">// class: 类名</span></span><br><span class="line">        <span class="comment">// style: 样式</span></span><br><span class="line">        <span class="attr">nodes</span>: [&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;div&#x27;</span>,</span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">                <span class="attr">class</span>: <span class="string">&#x27;div_class&#x27;</span>,</span><br><span class="line">                <span class="attr">style</span>: <span class="string">&#x27;line-height: 20px;padding:20px;&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="comment">// text文本节点</span></span><br><span class="line">                <span class="comment">// 注: 如果不是text节点 则必须有一个name属性</span></span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&#x27;⼩程序实践&#x27;</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="comment">// 图片节点</span></span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;img&#x27;</span>,</span><br><span class="line">                <span class="attr">attrs</span>: &#123;</span><br><span class="line">                    <span class="attr">src</span>: <span class="string">&#x27;https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/dba375885a62e4436a6b969d74bad683.jpg?thumb=1&amp;w=1533&amp;h=575&amp;f=webp&amp;q=90&#x27;</span>,</span><br><span class="line">                    <span class="comment">// 解决图片缝隙问题</span></span><br><span class="line">                    <span class="comment">// 小程序不允许外部修改内部的img样式 我们可以修改node节点img样式</span></span><br><span class="line">                    <span class="comment">// style: &#x27;width:100%;font-size:0;display:block;&#x27;</span></span><br><span class="line">                    <span class="attr">class</span>: <span class="string">&#x27;img&#x27;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// rich-text.wxss</span></span><br><span class="line">                    <span class="comment">// .img&#123;</span></span><br><span class="line">                    <span class="comment">// font-size:0;</span></span><br><span class="line">                    <span class="comment">// display:block;</span></span><br><span class="line">                    <span class="comment">// &#125;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;img&#x27;</span>,</span><br><span class="line">                <span class="attr">attrs</span>: &#123;</span><br><span class="line">                    <span class="attr">src</span>: <span class="string">&#x27;https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/b915dfd62177e40b5a9c760e90250cc0.jpg?thumb=1&amp;w=1533&amp;h=575&amp;f=webp&amp;q=90&#x27;</span>,</span><br><span class="line">                    <span class="attr">style</span>: <span class="string">&#x27;width:100%&#x27;</span>,</span><br><span class="line">                    <span class="attr">class</span>: <span class="string">&#x27;img&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;img&#x27;</span>,</span><br><span class="line">                <span class="attr">attrs</span>: &#123;</span><br><span class="line">                    <span class="attr">src</span>: <span class="string">&#x27;https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/0ba9f03efa17f17ca26cebf9364c1ff9.jpg?thumb=1&amp;w=1533&amp;h=575&amp;f=webp&amp;q=90&#x27;</span>,</span><br><span class="line">                    <span class="attr">style</span>: <span class="string">&#x27;width:100%&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">urls</span>: [],</span><br><span class="line">        <span class="attr">htmlSnip</span>: <span class="string">`&lt;div class=&quot;div_class&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;Title&lt;/h1&gt;</span></span><br><span class="line"><span class="string">        &lt;p class=&quot;p&quot;&gt;</span></span><br><span class="line"><span class="string">          渲染出来了 ~</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 取出 urls</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">findUrl</span>(<span class="params">nodes</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> urls = []</span><br><span class="line">            nodes.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 如果有attrs属性</span></span><br><span class="line">                <span class="keyword">if</span> (item.<span class="property">attrs</span>) &#123;</span><br><span class="line">                    <span class="comment">// 遍历attrs属性</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> item.<span class="property">attrs</span>) &#123;</span><br><span class="line">                        <span class="comment">// 如果键是src</span></span><br><span class="line">                        <span class="keyword">if</span> (key == <span class="string">&#x27;src&#x27;</span>) &#123;</span><br><span class="line">                            <span class="comment">// 保存到数组中</span></span><br><span class="line">                            urls.<span class="title function_">push</span>(item.<span class="property">attrs</span>[key])</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 判断有没有字节点</span></span><br><span class="line">                <span class="keyword">if</span> (item.<span class="property">children</span>) &#123;</span><br><span class="line">                    <span class="comment">// 如果有则递归调用</span></span><br><span class="line">                    <span class="comment">// 将返回的结果合并到上一个数组中</span></span><br><span class="line">                    urls = urls.<span class="title function_">concat</span>(<span class="title function_">findUrl</span>(item.<span class="property">children</span>))</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">return</span> urls</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">urls</span> = <span class="title function_">findUrl</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">nodes</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 点击图片实现预览</span></span><br><span class="line">    <span class="title function_">tap</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// 鼠标点击的位置 / 图片的高度 =&gt; 向下取整作为urls的下标</span></span><br><span class="line">        <span class="keyword">let</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(e.<span class="property">detail</span>.<span class="property">y</span> / <span class="number">134</span>)</span><br><span class="line">        <span class="keyword">let</span> urls = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">urls</span></span><br><span class="line">        wx.<span class="title function_">previewImage</span>(&#123;</span><br><span class="line">            <span class="comment">// 当前图片</span></span><br><span class="line">            <span class="attr">current</span>: urls[index],</span><br><span class="line">            <span class="comment">// 图片数组</span></span><br><span class="line">            <span class="attr">urls</span>: urls</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>拓展问题：如何预览保存rich-text富文本组件中的图片？</strong></p>
<p>思路：如果可以使用单击事件，以单击事件的事件源currentTarget获取到目标组件，再判断组件是不是image，如果是就取它的src属性就能实现预览和下载，但是rich-text中所有节点都屏蔽了单击事件，所以此方法是行不通的，但我们仍然可以添加tap事件，在事件函数中使用wx.previewImage接口预览图片，然后选择需要的图片下载，需要注意的是， 预览之前我们需要遍历rich-text中nodes数据，将所有图片地址预先取出来，当单击rich-text时，触发预览，在事件句柄中，事件对象是一个TouchEvent对象，使用其pageX、pageY属性，判断用户大概点击了什么位置，如果以位置可以判断出是哪一张，就将其作为wx.previewImage的第一个参数传进去，如果不能，就选第一张即可</p>
<p><strong>拓展问题：在富文本rich-text里面怎么插入ad 广告标签？如何将HTML文本直接解析呈现？</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">代码太多...</span><br></pre></td></tr></table></figure>
<h6 id="view"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/view.html">view</a></h6>
<p><strong>扩展问题：如何把 view 上的内容绘制在画布上，生成一张海报?</strong></p>
<p>思路：view不能直接转绘到画布上，如果想生成海报，一种可行的办法是这样</p>
<ul>
<li>用wx.createCanvasContext创建一个画布</li>
<li>在画布上绘制内容，文本，图片</li>
<li>wx.canvasToTempFilePath保存到本地并获取一个临时图片路径</li>
<li>wx.saveImageToPhotosAlbum保存临时文件到相册里</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/Kujiale-Mobile/Painter">GitHub - Kujiale-Mobile/Painter: 小程序生成图片库，轻松通过 json 方式绘制一张可以发到朋友圈的图片</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/wechat-miniprogram/wxml-to-canvas">wxml-to-canvas</a></p>
<p><img data-src="image-20240321114537787.png" alt="image-20240321114537787"></p>
<h6 id="image"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html">image</a></h6>
<h6 id="swiper"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">swiper</a></h6>
<h6 id="scrollview">scrollview</h6>
<p>scrollview.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height: 300rpx;background-color: aquamarine;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    bindscrolltolower: 滚动到底部/右边时触发 </span></span><br><span class="line"><span class="comment">    refresher-enabled: 开启下拉刷新</span></span><br><span class="line"><span class="comment">    refresher-triggered: 下拉刷新状态</span></span><br><span class="line"><span class="comment">    bindrefresherrefresh: 下拉刷新触发的回调</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>纵向scroll-view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">   	<span class="comment">&lt;!-- 注意: 当开启scroll-y时 一定要给组件一个高度 子组件的高度之和一定要大于这个高度 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;sv&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">scroll-y</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindscrolltolower</span>=<span class="string">&quot;toLoewrHandler&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">refresher-enabled</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">refresher-triggered</span>=<span class="string">&quot;&#123;&#123;isReFresh&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindrefresherrefresh</span>=<span class="string">&quot;refreshHandler&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.imgUrl&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>横向scroll-view<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    enable-flex: 启用 flexbox 布局</span></span><br><span class="line"><span class="comment">    scroll-x: 启用横向滚动</span></span><br><span class="line"><span class="comment">    注意: 启用时要给组件一个宽度 一般这个值是100%等于屏宽 子组件的宽度之和要大于屏宽 </span></span><br><span class="line"><span class="comment">    如果出现不滚动的现象尝试给容器添加这两个样式: white-space: nowrap; display:inline-block</span></span><br><span class="line"><span class="comment">	目的是为了让子元素在横向上排列成一行 </span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;sv2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">enable-flex</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">scroll-x</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindscrolltolower</span>=<span class="string">&quot;toRightHandler&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.imgUrl&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100vw;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>scrollview.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">swiperList</span>: [],</span><br><span class="line">        <span class="attr">isReFresh</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">toRightHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/getProductList&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">const</span> &#123;data&#125; = result</span><br><span class="line">               <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="comment">// 实现上拉加载的效果</span></span><br><span class="line">                <span class="comment">// 在之前的数据数组中追加新的数据</span></span><br><span class="line">                  <span class="attr">swiperList</span>: [</span><br><span class="line">                      ...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>,</span><br><span class="line">                      ...data</span><br><span class="line">                  ]</span><br><span class="line">               &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">refreshHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/getProductList&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">const</span> &#123;data&#125; = result</span><br><span class="line">               <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="comment">// 实现上拉加载的效果</span></span><br><span class="line">                <span class="comment">// 在之前的数据数组中追加新的数据</span></span><br><span class="line">                  <span class="attr">swiperList</span>: [</span><br><span class="line">                      ...data,</span><br><span class="line">                      ...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>,</span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">isReFresh</span>: <span class="literal">false</span></span><br><span class="line">               &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;) </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">toLoewrHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/getProductList&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">const</span> &#123;data&#125; = result</span><br><span class="line">               <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="comment">// 实现上拉加载的效果</span></span><br><span class="line">                <span class="comment">// 在之前的数据数组中追加新的数据</span></span><br><span class="line">                  <span class="attr">swiperList</span>: [</span><br><span class="line">                      ...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">swiperList</span>,</span><br><span class="line">                      ...data</span><br><span class="line">                  ]</span><br><span class="line">               &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/getProductList&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">               <span class="keyword">const</span> &#123;data&#125; = result</span><br><span class="line">               <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                  <span class="attr">swiperList</span>: data</span><br><span class="line">               &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>scrollview.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sv</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sv2</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400</span>rpx;</span><br><span class="line">    <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="movable-view"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/movable-view.html">movable-view</a></h6>
<p><strong>左滑删除实现</strong></p>
<p>slide-view.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 左滑删除1 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>左侧删除1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">movable-area</span> <span class="attr">style</span>=<span class="string">&quot;width:750rpx;height:100rpx;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">movable-view</span> <span class="attr">style</span>=<span class="string">&quot;width:1050rpx;height:100rpx;&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;horizontal&quot;</span> <span class="attr">class</span>=<span class="string">&quot;max&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>这⾥是插⼊到组内容 1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;read&quot;</span>&gt;</span>已读<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">movable-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">movable-area</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 左滑删除2 使用第三方模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>左侧删除2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slide-view</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">width</span>=<span class="string">&quot;750&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">slideWidth</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;left&quot;</span>&gt;</span>这⾥是插⼊到组内容 2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;read&quot;</span>&gt;</span>已读<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">slide-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 左滑删除3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section-title&quot;</span>&gt;</span>左侧删除3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page__bd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cells&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mp-slideview</span> <span class="attr">ext-class</span>=<span class="string">&quot;slideViewClass&quot;</span> <span class="attr">buttons</span>=<span class="string">&quot;&#123;&#123;slideButtons&#125;&#125;&quot;</span> <span class="attr">bindbuttontap</span>=<span class="string">&quot;slideButtonTap&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mp-cell</span> <span class="attr">value</span>=<span class="string">&quot;标题文字&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mp-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mp-slideview</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-cells&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mp-slideview</span> <span class="attr">buttons</span>=<span class="string">&quot;&#123;&#123;slideButtons&#125;&#125;&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span> <span class="attr">bindbuttontap</span>=<span class="string">&quot;slideButtonTap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;weui-slidecell&quot;</span>&gt;</span></span><br><span class="line">    左滑可以删除（图标Button）</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mp-slideview</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>slide-view.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> base64 = <span class="built_in">require</span>(<span class="string">&quot;../../images/base64&quot;</span>);</span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">widget</span> = <span class="variable language_">this</span>.<span class="title function_">selectComponent</span>(<span class="string">&#x27;.widget&#x27;</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">icon</span>: base64.<span class="property">icon20</span>,</span><br><span class="line">      <span class="attr">slideButtons</span>: [&#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;普通1&#x27;</span>,</span><br><span class="line">        <span class="attr">src</span>: <span class="string">&#x27;/images/icon_love.svg&#x27;</span>, <span class="comment">// icon的路径</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;普通2&#x27;</span>,</span><br><span class="line">        <span class="attr">extClass</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">        <span class="attr">src</span>: <span class="string">&#x27;/images/icon_star.svg&#x27;</span>, <span class="comment">// icon的路径</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&#x27;警示3&#x27;</span>,</span><br><span class="line">        <span class="attr">extClass</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">        <span class="attr">src</span>: <span class="string">&#x27;/images/icon_del.svg&#x27;</span>, <span class="comment">// icon的路径</span></span><br><span class="line">      &#125;],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>slide-view.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;slide-view&quot;</span><span class="punctuation">:</span> <span class="string">&quot;miniprogram-slide-view&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mp-slideview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;weui-miniprogram/slideview/slideview&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mp-cell&quot;</span><span class="punctuation">:</span> <span class="string">&quot;weui-miniprogram/cell/cell&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>slide-view.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">movable-view &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#1AAD19</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">movable-area &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.max</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左滑删除1 */</span></span><br><span class="line"><span class="selector-class">.list_item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#DEDEDE</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 左侧删除2 */</span></span><br><span class="line"><span class="selector-class">.slide</span>&#123;</span><br><span class="line">  <span class="comment">/* border-top:1px solid #ccc; */</span></span><br><span class="line">  <span class="attribute">border-bottom</span>:<span class="number">1px</span> solid <span class="number">#DEDEDE</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">color</span>: grey;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">direction</span>: row;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">110</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.delete</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150</span>rpx; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  */</span></span><br><span class="line"><span class="selector-class">.slideViewClass</span> <span class="selector-class">.weui-cell</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="shopCar">shopCar</h6>
<p>shopCar.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">&#x27;./getSum.wxs&#x27;</span> <span class="attr">module</span>=<span class="string">&quot;getSum&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;productList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">checkbox</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123;item.isChecked&#125;&#125;&quot;</span> <span class="attr">catchtap</span>=<span class="string">&quot;clickHandler&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">data-index</span>=<span class="string">&#x27;&#123;&#123;index&#125;&#125;&#x27;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item.price&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item.number&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;total&quot;</span>&gt;</span>总价: &#123;&#123;getSum(productList)&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>shopCar.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">productList</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;白象方便面&#x27;</span>,</span><br><span class="line">                <span class="attr">price</span>: <span class="number">50</span>,</span><br><span class="line">                <span class="attr">number</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">isChecked</span>: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;鸿星尔克哈&#x27;</span>,</span><br><span class="line">                <span class="attr">price</span>: <span class="number">99</span>,</span><br><span class="line">                <span class="attr">number</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">isChecked</span>: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;卫龙辣条哈&#x27;</span>,</span><br><span class="line">                <span class="attr">price</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">number</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">isChecked</span>: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="string">&#x27;4&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;德芙巧克力&#x27;</span>,</span><br><span class="line">                <span class="attr">price</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">number</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">isChecked</span>: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clickHandler</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="comment">// 获取页面传来的index</span></span><br><span class="line">        <span class="keyword">let</span> index = e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span></span><br><span class="line">        <span class="comment">// 找到数组中对应index数据 对其isChecked属性进行取反操作</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">productList</span>[index].<span class="property">isChecked</span> =!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">productList</span>[index].<span class="property">isChecked</span></span><br><span class="line">        <span class="comment">// 更新数据</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">productList</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">productList</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>shopCar.wxs</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params">productList</span>) &#123;</span><br><span class="line">    <span class="comment">// 目前仅支持es5的语法</span></span><br><span class="line">    <span class="keyword">var</span> total = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;productList.<span class="property">length</span>; i++)&#123;</span><br><span class="line">        <span class="comment">// 如果商品被选中</span></span><br><span class="line">        <span class="keyword">if</span>(productList[i].<span class="property">isChecked</span>)&#123;</span><br><span class="line">            <span class="comment">// 计算总价</span></span><br><span class="line">            total += productList[i].<span class="property">price</span> * productList[i]. number</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 暴露</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = getSum</span><br></pre></td></tr></table></figure>
<p>shopCar.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.total</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="自定义组件"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/">自定义组件</a></h5>
<h6 id="selfComponent">selfComponent</h6>
<p>selfComponent.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navbar</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">parentList</span>=<span class="string">&#x27;&#123;&#123;[&quot;电影&quot;,&quot;综艺&quot;, &quot;科幻&quot;]&#125;&#125;&#x27;</span> <span class="attr">parentCurrent</span>=<span class="string">&quot;&#123;&#123;parentCurrent&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bind:parentEvent</span>=<span class="string">&quot;parentEvent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">navbar</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">swiper</span>  <span class="attr">bindchange</span>=<span class="string">&#x27;changeHandler&#x27;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">current</span>=<span class="string">&quot;&#123;&#123;parentCurrent&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>电影<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>综艺<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>科幻<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>selfComponent.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">parentCurrent</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">changeHandler</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="comment">// 获取轮播图当前所在的index</span></span><br><span class="line">        <span class="keyword">const</span> &#123;current&#125; = e.<span class="property">detail</span>;</span><br><span class="line">        <span class="comment">// 保存index</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">parentCurrent</span>: current</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">parentEvent</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="comment">// e.detail: 子组件传过来的参数</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">parentCurrent</span>: e.<span class="property">detail</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>selfComponent.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navbar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../../components/navbar/navbar&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>selfComponent.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">swiper &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">40</span>rpx;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">280</span>rpx;</span><br><span class="line">    <span class="attribute">background-color</span>: chartreuse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="navbar">navbar</h6>
<p>navbar.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;parentList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;&#123;&#123;parentCurrent==index?&#x27;active&#x27;:&#x27;&#x27;&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindtap</span>=<span class="string">&quot;clickHandler&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">data-index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>navbar.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 组件的属性列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="attr">parentList</span>: &#123;</span><br><span class="line">            <span class="comment">// 类型检测</span></span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">            <span class="comment">// 默认值</span></span><br><span class="line">            <span class="attr">default</span>: [<span class="string">&quot;笔记本&quot;</span>, <span class="string">&quot;手机&quot;</span>, <span class="string">&quot;平板&quot;</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">parentCurrent</span>:&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">            <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 组件的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// list: [&quot;笔记本&quot;, &quot;手机&quot;, &quot;平板&quot;],</span></span><br><span class="line">        <span class="comment">// current: 0</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 组件的方法列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// clickHandler(e)&#123;</span></span><br><span class="line">        <span class="comment">//     this.setData(&#123;</span></span><br><span class="line">        <span class="comment">//         current: e.currentTarget.dataset.index</span></span><br><span class="line">        <span class="comment">//     &#125;)</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 不能再使用上面方式修改数据了</span></span><br><span class="line">        <span class="comment">// 因为页面上使用的是父级传过来的parentCurrent</span></span><br><span class="line">        <span class="comment">// 所以我们要通知父级 让父级去修改数据</span></span><br><span class="line">        <span class="title function_">clickHandler</span>(<span class="params">e</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;parentEvent&#x27;</span>, e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">index</span>) </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>navbar.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="slot插槽">slot插槽</h5>
<p>header.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&#x27;left&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&#x27;right&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>header.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="comment">// 在组件定义时的选项中启用多slot支持</span></span><br><span class="line">        <span class="attr">multipleSlots</span>: <span class="literal">true</span> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>header.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将上面组件引入到页面中使用</p>
<p>slot.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;left&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;tapHandler&quot;</span>&gt;</span>返回<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;right&quot;</span>&gt;</span>个人<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isCreated&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>slot.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">isCreated</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">tapHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">isCreated</span>: !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">isCreated</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>slot.json</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;header&quot;</span>: <span class="string">&quot;../../components/header/header&quot;</span>,</span><br><span class="line">    <span class="string">&quot;footer&quot;</span>: <span class="string">&quot;../../components/footer/footer&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="组件的生命周期">组件的生命周期</h5>
<p><img data-src="image-20220908220753798.png" alt="image-20220908220753798"></p>
<p>count.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="number">5</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">        <span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 在组件实例进入页面节点树时执行</span></span><br><span class="line">        <span class="title function_">attached</span>(<span class="params"></span>)&#123; </span><br><span class="line">            <span class="comment">// 开启定时器</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">timeId</span> = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">// 通知父组件移除子组件</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&quot;removeTimeId&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">count</span> -= <span class="number">1</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 在组件实例被从页面节点树移除时执行</span></span><br><span class="line">        <span class="title function_">detached</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timeId</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="路由跳转">路由跳转</h5>
<p><img data-src="image-20220908225310387.png" alt=""></p>
<h5 id="页面生命周期">页面生命周期</h5>
<p><img data-src="https://res.wx.qq.com/wxdoc/dist/assets/img/page-lifecycle.2e646c86.png" alt="img"></p>
<p>pageLife.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;msg&#125;&#125;</span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;clickHandler&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>pageLife.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;若有诗书藏于心 岁月从不败美人&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">clickHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// 保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面。使用 wx.navigateBack 可以返回到原页面。小程序中页面栈最多十层</span></span><br><span class="line">        wx.<span class="title function_">redirectTo</span>(&#123;</span><br><span class="line">            <span class="comment">// ?id=2 路由传参 </span></span><br><span class="line">            <span class="comment">// 通过onload的形参options接收该参数</span></span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;/pages/07-shopcar/07-shopcar?id=2&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面加载&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面初次渲染完成&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面显示</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面显示&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面隐藏</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面隐藏&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面卸载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;监听页面卸载&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="获取用户信息">获取用户信息</h5>
<p>getUserInfo.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40rpx;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">bindtap</span>=<span class="string">&quot;getUserInfo&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;!userInfo.avatarUrl&#125;&#125;&quot;</span>&gt;</span>获取用户信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;userInfo.nickName&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40rpx;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">open-type</span>=<span class="string">&quot;share&quot;</span>&gt;</span>分享当前页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- &lt;button type=&quot;primary&quot; style=&quot;margin-top: 40rpx;&quot; open-type=&quot;getUserInfo&quot;</span></span><br><span class="line"><span class="comment">    bindgetuserinfo=&quot;getUserInfo&quot;&gt;获取用户信息&lt;/button&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- &lt;button style=&quot;margin-top: 40rpx;&quot;</span></span><br><span class="line"><span class="comment">    type=&quot;primary&quot;</span></span><br><span class="line"><span class="comment">    open-type=&quot;getPhoneNumber&quot;</span></span><br><span class="line"><span class="comment">    bindgetphonenumber=&quot;getPhoneNumber&quot;</span></span><br><span class="line"><span class="comment">    &gt;获取用户电话&lt;/button&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>getUserInfo.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">userInfo</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getUserInfo</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">            <span class="attr">desc</span>: <span class="string">&#x27;desc&#x27;</span>,</span><br><span class="line">            <span class="attr">lang</span>: <span class="string">&#x27;zh_CN&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">userInfo</span>: res.<span class="property">userInfo</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// 将用户信息保存到本地缓存中</span></span><br><span class="line">                wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;userInfo&#x27;</span>, res.<span class="property">userInfo</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// getPhoneNumber(phone)&#123;</span></span><br><span class="line">    <span class="comment">//     console.log(phone)</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// 每次加载页面从本地缓存中取出用户数据</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">userInfo</span>: wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;userInfo&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onPullDownRefresh</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听用户下拉动作&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;上拉触底&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户点击右上角分享</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onShareAppMessage</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">from</span> == <span class="string">&#x27;button&#x27;</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">from</span> == <span class="string">&#x27;menu&#x27;</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">222</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;好兄弟帮忙砍一刀&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&quot;/pages/12-getUserInfo/12-getUserInfo&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>getUserInfo.wxss</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> image &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="获取用户openId">获取用户openId</h5>
<p>openId.wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-top: 40rpx;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;tapHandler&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>获取用户code<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>openId.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="comment">// 获取用户的code</span></span><br><span class="line">    <span class="title function_">tapHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        wx.<span class="title function_">login</span>(&#123; </span><br><span class="line">            <span class="title function_">success</span>(<span class="params">res</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(res.<span class="property">code</span>) &#123;</span><br><span class="line">                    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">                      <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/getOpenId&#x27;</span>,</span><br><span class="line">                      <span class="attr">data</span>: &#123;<span class="attr">code</span>: res.<span class="property">code</span>&#125;,</span><br><span class="line">                      <span class="title function_">success</span>(<span class="params">res</span>)&#123;</span><br><span class="line">                        wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;token&#x27;</span>, res.<span class="property">data</span>)</span><br><span class="line">                      &#125; </span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 后端如何处理code？代码如下 要求了解</span></span><br><span class="line">    <span class="comment">// 获取openId</span></span><br><span class="line">    <span class="comment">// app.use(&#x27;/getOpenId&#x27;, async (req, res, next) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//     const CODE = req.query.code</span></span><br><span class="line">    <span class="comment">//     const APPID = &quot;wx13bb6e5496ae00d3&quot;</span></span><br><span class="line">    <span class="comment">//     const APPSECRET =    &quot;c72598c06ee2fc7f167923c3dfa3f116&quot;</span></span><br><span class="line">    <span class="comment">//     let url = `https://api.weixin.qq.com/sns/    jscode2session?appid=$&#123;APPID&#125;&amp;secret=$&#123;APPSECRET&#125;&amp;  js_code=$&#123;CODE&#125;&amp;grant_type=authorization_code`</span></span><br><span class="line">    <span class="comment">//     // 发起请求获取openId</span></span><br><span class="line">    <span class="comment">//     const &#123;data&#125; = await fly.get(&#123;url&#125;)</span></span><br><span class="line">    <span class="comment">//     // 反序列化 data</span></span><br><span class="line">    <span class="comment">//     let openId = JSON.parse(data).openid</span></span><br><span class="line">    <span class="comment">//     // 自定义登录态 =&gt; 将openId和用户信息进行关联</span></span><br><span class="line">    <span class="comment">//     let obj = &#123;</span></span><br><span class="line">    <span class="comment">//       name: &#x27;许&#x27;,</span></span><br><span class="line">    <span class="comment">//       age: 18,</span></span><br><span class="line">    <span class="comment">//       openId</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     // 对登录态进行加密 jsonwebtoken</span></span><br><span class="line">    <span class="comment">//     let token = jwt.sign(obj, &#x27;web2301a&#x27;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//     let verifyObj = jwt.verify(token, &#x27;bgs2012A&#x27;)</span></span><br><span class="line">    <span class="comment">//     console.log(verifyObj)</span></span><br><span class="line">    <span class="comment">//     // &#123;</span></span><br><span class="line">    <span class="comment">//     //   name: &#x27;许&#x27;,</span></span><br><span class="line">    <span class="comment">//     //   age: 18,</span></span><br><span class="line">    <span class="comment">//     //   openId: &#x27;oZmUB41o1l8nTYRvDg0NXBYVaUdk&#x27;,</span></span><br><span class="line">    <span class="comment">//     //   iat: 1646789558</span></span><br><span class="line">    <span class="comment">//     // &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//     res.send(token)</span></span><br><span class="line">    <span class="comment">//   &#125;)</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="小程序开放能力">小程序开放能力</h4>
<h5 id="小程序连接wifi">小程序连接wifi</h5>
<p>wxml</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-head&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page-head__title&quot;</span>&gt;</span>微信连wifi<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page-head__desc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;page-section__title&quot;</span>&gt;</span>3.15<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-area&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;startToConnect&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>连接<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> connectWifi <span class="keyword">from</span> <span class="string">&#x27;../../lib/connect-wifi&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">startToConnect</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">connectWifi</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;startToConnect result&quot;</span>,res)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>wifi-connect.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">connectWifi</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> ssid = <span class="string">&#x27;201&#x27;</span>,</span><br><span class="line">  pass = <span class="string">&#x27;123456789&#x27;</span></span><br><span class="line">  <span class="comment">// 查看平台环境</span></span><br><span class="line">  <span class="keyword">let</span> sysInfo = wx.<span class="title function_">getSystemInfoSync</span>()</span><br><span class="line">  <span class="keyword">let</span> platform = sysInfo.<span class="property">platform</span></span><br><span class="line">  <span class="comment">// devtools/android/ios </span></span><br><span class="line">  <span class="comment">// ios:iOS 10.0.1</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;platform&quot;</span>, platform, sysInfo.<span class="property">system</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 只有ios 11以上，及andoird 6以上，才有这样的wifi连接功能</span></span><br><span class="line">  <span class="keyword">if</span> (platform == <span class="string">&quot;android&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">// android 6.21</span></span><br><span class="line">    <span class="keyword">let</span> sysVersion = <span class="built_in">parseInt</span>(sysInfo.<span class="property">system</span>.<span class="title function_">substr</span>(<span class="number">8</span>))</span><br><span class="line">    <span class="keyword">if</span> (sysVersion &lt; <span class="number">6</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;android版本低&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> res0 = <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">getSetting</span>(&#123;</span><br><span class="line">    <span class="comment">// 是否同时获取用户订阅消息的订阅状态，默认不获取。注意：withSubscriptions 只返回用户勾选过订阅面板中的“总是保持以上选择，不再询问”的订阅消息</span></span><br><span class="line">      <span class="attr">withSubscriptions</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">	<span class="comment">// 检查是否有地理位置授权</span></span><br><span class="line">    <span class="keyword">if</span> (res0 &amp;&amp; !res0.<span class="property">authSetting</span>[<span class="string">&quot;scope.userLocation&quot;</span>]) &#123;</span><br><span class="line">      <span class="comment">// 如果没有这个权限，先授权</span></span><br><span class="line">      <span class="keyword">let</span> authRes = <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">authorize</span>(&#123;</span><br><span class="line">        <span class="attr">scope</span>: <span class="string">&#x27;scope.userLocation&#x27;</span></span><br><span class="line">      &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span></span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (authRes &amp;&amp; authRes.<span class="property">errMsg</span> != <span class="string">&quot;authorize:ok&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;地理授权失败&#x27;</span>, authRes.<span class="property">errMsg</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;android地理授权失败&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (platform == <span class="string">&quot;ios&quot;</span>) &#123;</span><br><span class="line">      <span class="comment">// ios 12.0</span></span><br><span class="line">    <span class="keyword">let</span> sysVersion = <span class="built_in">parseInt</span>(sysInfo.<span class="property">system</span>.<span class="title function_">substr</span>(<span class="number">4</span>))</span><br><span class="line">    <span class="keyword">if</span> (sysVersion &lt; <span class="number">11</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;ios版本低&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;请切到系统设置-&gt;wifi列表，等待wifi连接成功&#x27;</span>,</span><br><span class="line">      <span class="attr">showCancel</span>: <span class="literal">false</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;平台不支持&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 启动wifi模块</span></span><br><span class="line">  <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">startWifi</span>().<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 拉取wifi列表</span></span><br><span class="line">  <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">getWifiList</span>().<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 监听wifi列表到达</span></span><br><span class="line">    wx.<span class="title function_">onGetWifiList</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(res)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (!res.<span class="property">wifiList</span>.<span class="property">length</span>) <span class="keyword">return</span> <span class="string">&quot;wifi列表为空&quot;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res.wifiList&quot;</span>, res.<span class="property">wifiList</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// var signalStrength = 0;</span></span><br><span class="line">  <span class="keyword">var</span> bssid = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; res.<span class="property">wifiList</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> wifi = res.<span class="property">wifiList</span>[i]</span><br><span class="line">    <span class="keyword">if</span> (wifi.<span class="property">SSID</span> == ssid) &#123;</span><br><span class="line">      <span class="comment">// BSSID: wifi网络的唯一地址</span></span><br><span class="line">      bssid = wifi.<span class="property">BSSID</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!bssid) <span class="keyword">return</span> <span class="string">&#x27;未查询到目标wifi&#x27;</span></span><br><span class="line">  <span class="comment">// 连接wifi</span></span><br><span class="line">  <span class="keyword">let</span> res1 = <span class="keyword">await</span> wx.<span class="property">wxp</span>.<span class="title function_">connectWifi</span>(&#123;</span><br><span class="line">    <span class="attr">SSID</span>: ssid,</span><br><span class="line">    <span class="attr">BSSID</span>: bssid,</span><br><span class="line">    <span class="attr">password</span>: pass</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;err&quot;</span>, err);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`运行错误：<span class="subst">$&#123;err&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">if</span> (res1) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;wifi连接成功&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;connectWifi:ok&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;未知错误&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connectWifi</span><br></pre></td></tr></table></figure>
<p>app.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;permission&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scope.userLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;位置信息用途说明&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="云开发">云开发</h4>
<p><strong>云开发提供的所有能力</strong><br>
云函数<br>
云数据库<br>
云存储<br>
云调用<br>
HTTP API<br>
…</p>
<p><img data-src="image-20220912205119776.png" alt=""></p>
<p><img data-src="image-20220912205219937.png" alt=""></p>
<p><img data-src="image-20220912205522992.png" alt=""></p>
<h5 id="云开发和非云开的区别？">云开发和非云开的区别？</h5>
<p>1：云开发是什么</p>
<p>小程序云开发是一种新的开发方式，它能够帮助开发者快速、便捷地开发小程序。</p>
<p>2：小程序云开发的优势</p>
<p>小程序云开发和非云开发有什么区别？这是一个很好的问题。</p>
<p>首先，我们来看看小程序云开发的优势。</p>
<p>总之，小程序云开发具有诸多优势，能够帮助我们快速、方便、安全地开发小程度。</p>
<p>3：非云开发的优势</p>
<p>首先，我们来看一下小程序云开发和非云开发的区别：</p>
<p>小程序云开发是一种全新的开发方式，它使用了云端的资源，能够更加轻松地开发出高质量的小程序。非云开发则是相对传统的开发方式，使用本地的资源进行开发。</p>
<p>下面我们来看看小程序云开发和非云开发各自的优势：</p>
<p><strong>小程序云开发</strong></p>
<p>使用了云端的资源，能够更加轻松地开发出高质量的小程序。</p>
<p>在运行时也能够得到更好的性能。因为它不会像本地小程序那样占用过多的内存和CPU资源。</p>
<p>代码也更加容易维护和理解。因为代码是分布在不同的文件中，并且采用了标准化的代码风格。</p>
<p>对于新手来说，学习小程序云开发也相对容易一些。因为相对而言，它的代码量要少很多。</p>
<p><strong>非云开发</strong></p>
<p>相对传统的开发方式，使用本地的资源进行开发。</p>
<p>在运行时不会占用过多的内存和CPU资源（如果代码写得好的话)。</p>
<p>代码也相对容易理解和修改。因为代码是集中在一个文件中，并且采用了标准化的代码风格。</p>
<p><strong>总结：</strong></p>
<p><strong>传统开发中</strong>， 开发者不仅需要关注前端的页面展示， 还需要搭建后端的数据库， 购买服务器</p>
<p>和域名，如果是境内服务器， 还需要备案等等。</p>
<p>小程序上线后， 开发者需要定期进行数据库维护、网络安全、负载均衡等工作</p>
<p><strong>云开发中</strong>，开发者只需要关注前端的页面展示， 后端的服务器、维护、安全处理等工作全部由腾讯云代替我们完成，方便了很多！</p>

    </div>

    
    
    

     <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px; padding-top: 10px;"> <i class="fa fa-heart"></i>--------------------------------------- The End ---------------------------------------<i class="fa fa-heart"></i>  </div>
    
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>老许
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://laoxu.live/2023/08/09/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="小程序 学习">https://laoxu.live/2023/08/09/小程序/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/blog/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag"><i class="fa fa-tag"></i> 小程序</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2023/08/09/webpack/" rel="prev" title="webpack 学习">
      <i class="fa fa-chevron-left"></i> webpack 学习
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2024/02/16/vue2%E9%A1%B9%E7%9B%AE/" rel="next" title="vue2 项目">
      vue2 项目 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%85%E8%B0%88%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="nav-number">1.</span> <span class="nav-text">浅谈小程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%90%AF%E5%8A%A8%E6%9C%BA%E5%88%B6"><span class="nav-number">2.</span> <span class="nav-text">小程序启动机制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E7%BA%BF%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">视图线程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E7%BA%BF%E7%A8%8B"><span class="nav-number">2.2.</span> <span class="nav-text">逻辑线程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="nav-number">3.</span> <span class="nav-text">小程序开发环境</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%89%B9%E7%82%B9"><span class="nav-number">4.</span> <span class="nav-text">小程序特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%85%8D%E7%BD%AE"><span class="nav-number">5.</span> <span class="nav-text">小程序配置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="nav-number">5.1.</span> <span class="nav-text">全局配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE"><span class="nav-number">5.2.</span> <span class="nav-text">页面配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sitemap-%E9%85%8D%E7%BD%AE"><span class="nav-number">5.3.</span> <span class="nav-text">sitemap 配置</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9F%BA%E7%A1%80"><span class="nav-number">6.</span> <span class="nav-text">小程序基础</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.1.</span> <span class="nav-text">框架接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">6.2.</span> <span class="nav-text">事件系统</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#WXML%E8%AF%AD%E6%B3%95"><span class="nav-number">6.3.</span> <span class="nav-text">WXML语法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ToDoList"><span class="nav-number">6.3.1.</span> <span class="nav-text">ToDoList</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Tab"><span class="nav-number">6.3.2.</span> <span class="nav-text">Tab</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#WXSS%E8%AF%AD%E6%B3%95"><span class="nav-number">6.4.</span> <span class="nav-text">WXSS语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#WXS%E8%AF%AD%E6%B3%95"><span class="nav-number">6.5.</span> <span class="nav-text">WXS语法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#FormatTime"><span class="nav-number">6.5.1.</span> <span class="nav-text">FormatTime</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Search"><span class="nav-number">6.5.2.</span> <span class="nav-text">Search</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82"><span class="nav-number">6.6.</span> <span class="nav-text">数据请求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6"><span class="nav-number">6.7.</span> <span class="nav-text">小程序组件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#icon"><span class="nav-number">6.7.1.</span> <span class="nav-text">icon</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#progress"><span class="nav-number">6.7.2.</span> <span class="nav-text">progress</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#rich-text"><span class="nav-number">6.7.3.</span> <span class="nav-text">rich-text</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#view"><span class="nav-number">6.7.4.</span> <span class="nav-text">view</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#image"><span class="nav-number">6.7.5.</span> <span class="nav-text">image</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#swiper"><span class="nav-number">6.7.6.</span> <span class="nav-text">swiper</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#scrollview"><span class="nav-number">6.7.7.</span> <span class="nav-text">scrollview</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#movable-view"><span class="nav-number">6.7.8.</span> <span class="nav-text">movable-view</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#shopCar"><span class="nav-number">6.7.9.</span> <span class="nav-text">shopCar</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="nav-number">6.8.</span> <span class="nav-text">自定义组件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#selfComponent"><span class="nav-number">6.8.1.</span> <span class="nav-text">selfComponent</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#navbar"><span class="nav-number">6.8.2.</span> <span class="nav-text">navbar</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#slot%E6%8F%92%E6%A7%BD"><span class="nav-number">6.9.</span> <span class="nav-text">slot插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">6.10.</span> <span class="nav-text">组件的生命周期</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC"><span class="nav-number">6.11.</span> <span class="nav-text">路由跳转</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">6.12.</span> <span class="nav-text">页面生命周期</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="nav-number">6.13.</span> <span class="nav-text">获取用户信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7openId"><span class="nav-number">6.14.</span> <span class="nav-text">获取用户openId</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E6%94%BE%E8%83%BD%E5%8A%9B"><span class="nav-number">7.</span> <span class="nav-text">小程序开放能力</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%9E%E6%8E%A5wifi"><span class="nav-number">7.1.</span> <span class="nav-text">小程序连接wifi</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%91%E5%BC%80%E5%8F%91"><span class="nav-number">8.</span> <span class="nav-text">云开发</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%91%E5%BC%80%E5%8F%91%E5%92%8C%E9%9D%9E%E4%BA%91%E5%BC%80%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="nav-number">8.1.</span> <span class="nav-text">云开发和非云开的区别？</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="老许"
      src="/blog/images/avatar.gif">
  <p class="site-author-name" itemprop="name">老许</p>
  <div class="site-description" itemprop="description">当学习成为了习惯<br/>知识也就变成了常识</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xuwanghui" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xuwanghui" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/blog/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/blog/xu_wang_hui@163.com" title="E-Mail → xu_wang_hui@163.com"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/yourname" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=7515636986&auto=1&height=90"></iframe>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer" style="text-align:center">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">老许</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">819k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">12:25</span>
</div>

<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("03/12/2022 17:00:00");//在此处修改你的建站时间，格式：月/日/年 时:分:秒
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








        <a href="https://beian.miit.gov.cn/" target="_blank" style='color: #999999;text-decoration: none;'>京ICP备2021019190号-1</a>
      </div>
    </footer>
  </div>

  
  
  <script color='51,51,51' opacity='0.5' zIndex='-1' count='66' src="/blog/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/blog/js/local-search.js"></script>













    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '6mmQGNuthx4k1dsbW9UKhHGT-gzGzoHsz',
      appKey     : 'gXfUEGyEXIARBJjK2K53R51P',
      placeholder: "填写正确的邮箱可及时收到回复提醒哈 ~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>

</body>
</html>
<script type="text/javascript" src="/blog/js/clicklove.js"></script>
